<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<div class="container">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/localstoragedb.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <title>Edit Entry</title>
<!-- As a link -->
<nav class="navbar navbar-dark bg-secondary">
  <div class="container-fluid">
    <a class="navbar-brand" href="/index.html#20">Edit Entry</a>
  </div>
</nav>
<nav class=" mt-3 navbar navbar-light bg-light">
  <a class="ml-4" style="margin-left: 15px; font-weight: bold;" href="index.html">< Back</a>
  <a href="#"  style="margin-right: 15px; font-weight: bold;"  class=" float-right">Edit Entry</a>
</nav>


<script src="js/datetime.js"></script>
       <link rel="stylesheet" type="text/css" href="js/DataTables/datatables.min.css"/>
 
<script type="text/javascript" src="js/DataTables/datatables.min.js"></script>

    <input type="text" class="form-control name mt-3" placeholder="name">
    <input type="text" class="form-control date mt-3"placeholder="date">
    <input type="text" class="form-control money mt-3"placeholder="money">
    <input type="text" class="form-control village mt-3"placeholder="village">
     <select class="form-control via mt-3" id="exampleFormControlSelect1">
      <option></option>
      <option>guhe</option> 
      <option>tanwar</option>
    </select>
    <button class="btn btn-block bg-dark mt-3 text-white">Edit Entry</button>
  </head>
  <body>
    <script type="text/javascript">
      function urlget(paramName)
{
    var sURL = window.document.URL.toString();
    if (sURL.indexOf("?") > 0)
    {
        var arrParams = sURL.split("?");
        var arrURLParams = arrParams[1].split("&");
        var arrParamNames = new Array(arrURLParams.length);
        var arrParamValues = new Array(arrURLParams.length);

        var i = 0;
        for (i = 0; i<arrURLParams.length; i++)
        {
            var sParam =  arrURLParams[i].split("=");
            arrParamNames[i] = sParam[0];
            if (sParam[1] != "")
                arrParamValues[i] = unescape(sParam[1]);
            else
                arrParamValues[i] = "No Value";
        }

        for (i=0; i<arrURLParams.length; i++)
        {
            if (arrParamNames[i] == paramName)
            {
                //alert("Parameter:" + arrParamValues[i]);
                return arrParamValues[i];
            }
        }
        return "No Parameters Found";
    }
}





$(document).ready(function(){

  var url = document.URL;

    var url_splitted = url.split('#');

    var idD = (url_splitted[1]).split('=')[1];



  var db = localStorageDB("baitule", localStorage);

  var current=db.queryAll("data",{query:{ID: idD}})
  $(".name").val(current[0]["name"]);
  $(".date").val(current[0]["date"]);
  $(".village").val(current[0]["village"]);
  $(".money").val(current[0]["money"]);
  $(".via").val(current[0]["via"]);


$("button").click(function(){
if($(".name").val() && $(".date").val() && $(".money").val() && $(".village").val()){
/*
    db.insert("data", {name:$(".name").val(),date:$(".date").val(),village:$(".village").val(),money:$(".money").val()})
*/

// change the title of books published in 1999 to "Unknown"
db.update("data", {ID: urlget("id")}, function(row) {
  row.name = $(".name").val();
  row.date = $(".date").val();
  row.village = $(".village").val();
  row.money = $(".money").val();
  row.via = $(".via").val();
  // the update callback function returns to the modified record
  return row;
});


    if(db.commit()){
        toastr.success("Entry Edited successfully!");
        window.location.href="index.html";
    }
  }else{
    toastr.warning("Please fill all the values!")
  }
})

 new DateTime($(".date"), {
        format: 'YYYY/MM/DD'
    });



   })
    //localStorage.clear();
  



    </script>


  </body>
</html>